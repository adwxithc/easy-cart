<%- include("../partials/userHeader.ejs") %>



 <!--================Cart Area =================-->
  <section class="cart_area" style="background-color: rgb(241,243,246);">
    <div class="container">
        <div class="cart_inner row" id="cartDisplay">



                <%
                if(locals.cart && cart && cart.cartItems.length > 0 ){%>
                    <div class=" col-lg-8">
                        <div class="blog_right_sidebar">
                   
                   <% for( let cartItem of cart.cartItems){
                    %>
            
                <div class="media post_item cart-item " id ='<%=cartItem.product._id%>'  >

                <div class="">
                    <a href="/productDetails?id=<%=cartItem.product._id%>">
                    <div class="cartImg">
                        <img src="/static/productImages/<%=cartItem.product.images[0]%>" alt="post">
                    </div>
                    </a>
                    <input type="hidden" name="" id="old<%=cartItem.product._id%>" value="<%=cartItem.quantity%>">
                    <div class="product_count mt-4 ml-5">
                        <input type="text" name="qty" id="q<%=cartItem.product._id%>" maxlength="12" value="<%=cartItem.quantity%>" title="Quantity:"
                            class="input-text qty" onchange="updateCart('<%=cartItem.product._id%>')">
                        <button onclick="inc('q<%=cartItem.product._id%>')"
                            class="increase items-count" type="button"><i class="lnr lnr-chevron-up"></i></button>
                        <button onclick="dec('q<%=cartItem.product._id%>')"
                            class="reduced items-count" type="button"><i class="lnr lnr-chevron-down"></i></button>
                    </div>

                </div>

                   
                    <div class="media-body cart-info">
                        <a href="#">
                            <a href="/productDetails?id=<%=cartItem.product._id%>"><h4><%=cartItem.product.name%></h4></a>
                        </a>
                        <p><%=cartItem.product.brand.name%><br>
                        Price :<span class="darkText amount" > <%=cartItem.price%></span></p>
                        
                        <h5 class="itemTotal"></h5>
                        
                        
                    </div>
                    <a href="#" class="yellowBtn cartBtn" onclick="remove( '<%=cartItem.product._id%> ')">REMOVE</a>
                   
                </div>
                

                <%
                   }%>

                               
            </div>
        </div>

                   <%
                }else{
            %>
            <div class=" col-lg-9 mx-auto" >
                <div class="blog_right_sidebar">


            <div style="width: 100%; height: 100%;" class="p-3">
                <div class="d-flex justify-content-center">
                    <img src="/static/assets/bckImages/cart_empty.png" alt="Cart is empty..!" class="empty_cart" >
                </div>
               
               <div class="empty-cart-container">
                <div>
                    <h5 class=""> Your cart is empty..!</h5>
                   
                </div>
                <div class="p-3">
                    <a class="darkBtn" href="/">shop now</a>
                </div>

               </div>
               
            </div>


            </div>
            </div>
            
                <%}%>
   
  
                
             



            <%if(locals.cart && cart && cart.cartItems.length > 0 ){%>
            <div class="col-lg-4 ">
                <div class="blog_right_sidebar setPdding cartSummery">
                <div class="d-flex justify-content-center cartSummeryHead">
                    <h2>Cart Total</h2>
                </div>

                <div class="cartSummeryBody">
                    <div class="">
                        <span class="total"> Total(4 unit) :</span>
                        <span class="text-dark " id="cartTotal">$40000</span>
                    </div>
                    <div class="">
                        <span>Discount :</span>
                        <span class="text-dark">$0</span>
                    </div>
                    <div class="mb-4">
                        <span>Delivery Charge :</span>
                        <span class="text-dark">$0</span>
                    </div>
                    <div class="borderTop font-weight-bold pt-2 mb-5">
                        <span> Grand Total :</span>
                        <span class="text-dark" id="grandTotal">$6000</span>
                    </div>
                    
                   
                    
                    <a href="/api/checkout" class=" darkBtn mt-5">Place Order</a>
                </div>
                
            </div>
        </div>
<%}%>


        </div>
    </div>
</section>


<!------------------------ confirm model-------------------- -->
<div id="confirmationModal" class="rmmodal">
    <div class="rmmodal-content">
        
        <i class="mdi mdi-close rmclose" id="closeModalBtn"></i>
        <div class="confirmHeader">
            <h3>Remove item</h3>
        </div>
        <div class="confirmBody">
            <p>Are you sure you want to remove this item?</p>
        </div>
        
        <div>
            <a id="confirmBtn" class="darkBtn">Confirm</a>
            
        </div>
        
    </div>
</div>

<!-- -----------------------------response model ------------------------->
<div id="modal" class="modal">
    <div class="modal-content">
        <span class="close" onclick="closeModal()">&times;</span>
        <p id="modal-message">Your message goes here.</p>
    </div>
</div>

<!--================End Cart Area =================-->


<%- include("../partials/userFooter.ejs") %>